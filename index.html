<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>استبيان العميل الفاخر</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
@import url('https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&display=swap');
:root {--gold:#d4af37;--dark-gold:#b8860b;--light-gold:#f1c75e;--text-light:#f8e9c4;--glass:rgba(255,255,255,0.08);--glass-border:rgba(212,175,55,0.3);--error:#ff6b6b;}
*{margin:0;padding:0;box-sizing:border-box;font-family:'El Messiri',sans-serif;}
body{background:linear-gradient(135deg,#1a1208 0%,#2c1e0f 50%,#1a1208 100%);color:var(--text-light);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:15px;}
.container{max-width:700px;width:100%;}
.header{text-align:center;margin-bottom:25px;}
.title{font-size:1.8rem;font-weight:700;color:var(--gold);text-shadow:0 0 10px rgba(212,175,55,0.4);}
.subtitle{font-size:0.95rem;color:#f5e9c2;}
.form-container{background:var(--glass);backdrop-filter:blur(10px);border:1px solid var(--glass-border);border-radius:20px;padding:25px 20px;box-shadow:0 8px 25px rgba(0,0,0,0.3);}
.form-step{display:none;}
.form-step.active{display:block;}
.question-title{font-size:1.2rem;margin-bottom:18px;color:var(--light-gold);}
.options-grid{display:flex;flex-direction:column;gap:12px;}
.option-card{background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:12px;padding:16px;cursor:pointer;transition:0.3s;}
.option-card.selected{border-color:var(--gold);background:rgba(212,175,55,0.1);}
.option-title{font-size:1rem;font-weight:600;color:var(--light-gold);}
.option-desc{font-size:0.85rem;color:rgba(255,255,255,0.7);}
.radio{display:none;}
.text-input{width:100%;padding:14px;background:rgba(255,255,255,0.05);border:1px solid var(--glass-border);border-radius:10px;color:var(--text-light);}
.custom-input{margin-top:12px;display:none;}
.error-message{color:var(--error);font-size:0.85rem;margin-top:8px;display:none;}
.form-navigation{display:flex;justify-content:space-between;margin-top:30px;gap:10px;}
.nav-btn{padding:14px 20px;background:linear-gradient(45deg,var(--dark-gold),var(--gold));border:none;border-radius:10px;color:#1c1a1a;font-weight:bold;font-size:1rem;cursor:pointer;flex:1;}
.progress-bar{height:6px;background:rgba(212,175,55,0.2);border-radius:3px;}
.progress{height:100%;background:linear-gradient(90deg,var(--dark-gold),var(--gold));width:10%;transition:width 0.5s ease;}
.progress-text{text-align:center;margin-top:8px;font-size:0.9rem;color:var(--light-gold);}
.step-indicators{display:flex;justify-content:center;gap:8px;margin:15px 0;}
.step-indicator{width:10px;height:10px;border-radius:50%;background:rgba(212,175,55,0.3);}
.step-indicator.active{background:var(--gold);}
.file-upload{margin-top:12px;padding:14px;background:rgba(255,255,255,0.05);border:1px dashed var(--glass-border);border-radius:10px;text-align:center;cursor:pointer;}
.file-name{margin-top:8px;font-size:0.85rem;color:var(--light-gold);}
.thankyou-message,.loading{text-align:center;display:none;padding:30px;}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1 class="title">استبيان العميل الفاخر</h1>
<p class="subtitle">نحن هنا لتصميم هوية فريدة تناسب ذوقك الرفيع. يرجى تعبئة جميع البيانات بدقة</p>
</div>
<div class="form-container">
<div class="progress-bar"><div class="progress" id="progress"></div></div>
<div class="progress-text" id="progress-text">السؤال 1 من 7</div>
<div class="step-indicators" id="step-indicators"></div>
<form id="clientForm">

<!-- 1 -->
<div class="form-step active" id="step-1">
<h2 class="question-title"><i class="fas fa-signature"></i> اسم الورشة أو المشروع</h2>
<input type="text" class="text-input" name="project_name" placeholder="أدخل اسم الورشة أو المشروع" />
<div class="error-message" id="error-1"></div>
</div>

<!-- 2 -->
<div class="form-step" id="step-2">
<h2 class="question-title"><i class="fas fa-tools"></i> نوع الشغل الأساسي</h2>
<div class="options-grid">
<label class="option-card"><input type="radio" name="work_type" value="دهان" class="radio"/><div class="option-content"><h3 class="option-title">دهان</h3></div></label>
<label class="option-card"><input type="radio" name="work_type" value="تذهيب" class="radio"/><div class="option-content"><h3 class="option-title">تذهيب</h3></div></label>
<label class="option-card"><input type="radio" name="work_type" value="تشطيب" class="radio"/><div class="option-content"><h3 class="option-title">تشطيب</h3></div></label>
<label class="option-card" id="other-work"><input type="radio" name="work_type" value="شيء آخر" class="radio"/><div class="option-content"><h3 class="option-title">شيء آخر</h3></div></label>
</div>
<div class="custom-input" id="work-custom"><input type="text" class="text-input" name="work_custom" placeholder="أدخل نوع الشغل الآخر" /></div>
<div class="error-message" id="error-2"></div>
</div>

<!-- 3 -->
<div class="form-step" id="step-3">
<h2 class="question-title"><i class="fas fa-paint-brush"></i> شكل الشعار المفضل</h2>
<div class="options-grid">
<label class="option-card"><input type="radio" name="logo_style" value="فخم وكلاسيكي" class="radio"/><div class="option-content"><h3 class="option-title">فخم وكلاسيكي</h3></div></label>
<label class="option-card"><input type="radio" name="logo_style" value="بسيط وحديث" class="radio"/><div class="option-content"><h3 class="option-title">بسيط وحديث</h3></div></label>
<label class="option-card"><input type="radio" name="logo_style" value="مزيج من الإثنين" class="radio"/><div class="option-content"><h3 class="option-title">مزيج من الإثنين</h3></div></label>
</div>
<div class="error-message" id="error-3"></div>
</div>

<!-- 4 -->
<div class="form-step" id="step-4">
<h2 class="question-title"><i class="fas fa-palette"></i> الألوان المفضلة</h2>
<div class="options-grid">
<label class="option-card"><input type="radio" name="colors" value="ذهبي وكلاسيكي" class="radio"/><div class="option-content"><h3 class="option-title">ذهبي وكلاسيكي</h3></div></label>
<label class="option-card"><input type="radio" name="colors" value="ألوان ترابية" class="radio"/><div class="option-content"><h3 class="option-title">ألوان ترابية</h3></div></label>
<label class="option-card" id="other-color"><input type="radio" name="colors" value="شيء آخر" class="radio"/><div class="option-content"><h3 class="option-title">شيء آخر</h3></div></label>
</div>
<div class="custom-input" id="color-custom"><input type="text" class="text-input" name="color_custom" placeholder="أدخل الألوان الأخرى" /></div>
<div class="error-message" id="error-4"></div>
</div>

<!-- 5 -->
<div class="form-step" id="step-5">
<h2 class="question-title"><i class="fas fa-drafting-compass"></i> نوع الشعار</h2>
<div class="options-grid">
<label class="option-card"><input type="radio" name="logo_type" value="رمز فقط" class="radio"/><div class="option-content"><h3 class="option-title">رمز فقط</h3></div></label>
<label class="option-card"><input type="radio" name="logo_type" value="كتابة فقط" class="radio"/><div class="option-content"><h3 class="option-title">كتابة فقط</h3></div></label>
<label class="option-card"><input type="radio" name="logo_type" value="رمز وكتابة" class="radio"/><div class="option-content"><h3 class="option-title">رمز وكتابة</h3></div></label>
<label class="option-card" id="other-logo-type"><input type="radio" name="logo_type" value="شيء آخر" class="radio"/><div class="option-content"><h3 class="option-title">شيء آخر</h3></div></label>
</div>
<div class="custom-input" id="logo-type-custom"><input type="text" class="text-input" name="logo_type_custom" placeholder="أدخل نوع الشعار الآخر" /></div>
<div class="error-message" id="error-5"></div>
</div>

<!-- 6 -->
<div class="form-step" id="step-6">
<h2 class="question-title"><i class="fas fa-heart"></i> الإحساس المطلوب</h2>
<div class="options-grid">
<label class="option-card"><input type="radio" name="feeling" value="فخامة" class="radio"/><div class="option-content"><h3 class="option-title">فخامة</h3></div></label>
<label class="option-card"><input type="radio" name="feeling" value="احتراف" class="radio"/><div class="option-content"><h3 class="option-title">احتراف</h3></div></label>
<label class="option-card" id="other-feeling"><input type="radio" name="feeling" value="شيء آخر" class="radio"/><div class="option-content"><h3 class="option-title">شيء آخر</h3></div></label>
</div>
<div class="custom-input" id="feeling-custom"><input type="text" class="text-input" name="feeling_custom" placeholder="أدخل الإحساس الآخر" /></div>
<div class="error-message" id="error-6"></div>
</div>

<!-- 7 -->
<div class="form-step" id="step-7">
<h2 class="question-title"><i class="fas fa-history"></i> هل لديك لوجو قديم؟</h2>
<div class="options-grid">
<label class="option-card"><input type="radio" name="old_logo" value="نعم" class="radio"/><div class="option-content"><h3 class="option-title">نعم</h3></div></label>
<label class="option-card"><input type="radio" name="old_logo" value="لا" class="radio"/><div class="option-content"><h3 class="option-title">لا</h3></div></label>
</div>
<div id="logo-details" style="display:none;margin-top:20px;">
<textarea class="text-input" name="logo_details" rows="3" placeholder="صف اللوجو القديم إن وجد"></textarea>
<div class="file-upload" id="file-upload"><i class="fas fa-cloud-upload-alt"></i><p>انقر لرفع اللوجو القديم</p><p class="file-name" id="file-name">لم يتم رفع أي ملف بعد</p></div>
<input type="file" id="file-input" style="display:none;" accept="image/*,.pdf,.psd,.ai" />
</div>
<div class="error-message" id="error-7"></div>
</div>

<div class="form-navigation">
<button type="button" class="nav-btn" id="prev-btn">السابق</button>
<button type="button" class="nav-btn" id="next-btn">التالي</button>
<button type="submit" class="nav-btn" id="submit-btn" style="display:none;">إرسال</button>
</div>
</form>

<div class="loading" id="loading"><i class="fas fa-spinner fa-spin"></i><p>جاري الإرسال...</p></div>
<div class="thankyou-message" id="thankyou-message"><i class="fas fa-check-circle"></i><h2>شكراً لك</h2><p>تم إرسال الاستبيان بنجاح</p></div>
</div>
</div>

<script>
const totalSteps=7;let currentStep=1;
const progressBar=document.getElementById('progress');
const progressText=document.getElementById('progress-text');
const stepIndicators=document.getElementById('step-indicators');
const prevBtn=document.getElementById('prev-btn');
const nextBtn=document.getElementById('next-btn');
const submitBtn=document.getElementById('submit-btn');
const thankyouMessage=document.getElementById('thankyou-message');
const loadingElement=document.getElementById('loading');
const fileUpload=document.getElementById('file-upload');
const fileInput=document.getElementById('file-input');
const fileName=document.getElementById('file-name');
const scriptURL="https://script.google.com/macros/s/AKfycbzZR-JwExA-BcPD2zkC01dIiWOoqL7Z3v4t-qqMwkCcFERwxEHCcxG_wZuuXIQVzZO2/exec";
for(let i=1;i<=totalSteps;i++){const d=document.createElement('div');d.classList.add('step-indicator');if(i===1)d.classList.add('active');stepIndicators.appendChild(d);}
function updateUI(){progressBar.style.width=(currentStep/totalSteps*100)+'%';progressText.textContent=`السؤال ${currentStep} من ${totalSteps}`;prevBtn.style.display=currentStep===1?'none':'flex';nextBtn.style.display=currentStep===totalSteps?'none':'flex';submitBtn.style.display=currentStep===totalSteps?'flex':'none';document.querySelectorAll('.form-step').forEach(e=>e.classList.remove('active'));document.getElementById(`step-${currentStep}`).classList.add('active');document.querySelectorAll('.step-indicator').forEach((ind,i)=>ind.classList.toggle('active',i<currentStep));window.scrollTo({top:0,behavior:'smooth'});}
function showError(s,m){const e=document.getElementById(`error-${s}`);if(e){e.textContent=m;e.style.display='block';}}
function hideError(s){const e=document.getElementById(`error-${s}`);if(e)e.style.display='none';}
function validateStep(s){
switch(s){
case 1:const p=document.querySelector('input[name="project_name"]').value.trim();if(!p){showError(1,"يرجى إدخال اسم الورشة أو المشروع");return false;}return true;
case 2:const w=document.querySelector('input[name="work_type"]:checked');if(!w){showError(2,"يرجى اختيار نوع الشغل");return false;}if(w.value==="شيء آخر"&&!document.querySelector('input[name="work_custom"]').value.trim()){showError(2,"يرجى تحديد النوع الآخر");return false;}return true;
case 3:if(!document.querySelector('input[name="logo_style"]:checked')){showError(3,"يرجى اختيار شكل الشعار");return false;}return true;
case 4:const c=document.querySelector('input[name="colors"]:checked');if(!c){showError(4,"يرجى اختيار الألوان");return false;}if(c.value==="شيء آخر"&&!document.querySelector('input[name="color_custom"]').value.trim()){showError(4,"يرجى تحديد الألوان الأخرى");return false;}return true;
case 5:const lt=document.querySelector('input[name="logo_type"]:checked');if(!lt){showError(5,"يرجى اختيار نوع الشعار");return false;}if(lt.value==="شيء آخر"&&!document.querySelector('input[name="logo_type_custom"]').value.trim()){showError(5,"يرجى تحديد نوع الشعار الآخر");return false;}return true;
case 6:const f=document.querySelector('input[name="feeling"]:checked');if(!f){showError(6,"يرجى اختيار الإحساس");return false;}if(f.value==="شيء آخر"&&!document.querySelector('input[name="feeling_custom"]').value.trim()){showError(6,"يرجى تحديد الإحساس الآخر");return false;}return true;
case 7:if(!document.querySelector('input[name="old_logo"]:checked')){showError(7,"يرجى الإجابة على هذا السؤال");return false;}return true;
default:return true;
}}
nextBtn.onclick=()=>{if(validateStep(currentStep)&&currentStep<totalSteps){hideError(currentStep);currentStep++;updateUI();}};
prevBtn.onclick=()=>{if(currentStep>1){currentStep--;updateUI();}};
document.querySelectorAll('.option-card').forEach(card=>{
card.onclick=function(){
const r=this.querySelector('input[type="radio"]');
if(r){document.querySelectorAll(`input[name="${r.name}"]`).forEach(i=>i.closest('.option-card').classList.remove('selected'));r.checked=true;this.classList.add('selected');if(r.name==='work_type')document.getElementById('work-custom').style.display=r.value==='شيء آخر'?'block':'none';
if(r.name==='colors')document.getElementById('color-custom').style.display=r.value==='شيء آخر'?'block':'none';
if(r.name==='feeling')document.getElementById('feeling-custom').style.display=r.value==='شيء آخر'?'block':'none';
if(r.name==='logo_type')document.getElementById('logo-type-custom').style.display=r.value==='شيء آخر'?'block':'none';
if(r.name==='old_logo')document.getElementById('logo-details').style.display=r.value==='نعم'?'block':'none';
hideError(currentStep);}
}});

fileUpload.onclick=()=>fileInput.click();
fileInput.onchange=()=>{fileName.textContent=fileInput.files.length>0?fileInput.files[0].name:'لم يتم رفع أي ملف بعد';};
async function fileToBase64(file){return new Promise((res,rej)=>{const r=new FileReader();r.onload=()=>res(r.result.split(",")[1]);r.onerror=rej;r.readAsDataURL(file);});}
document.getElementById("clientForm").addEventListener("submit",async e=>{
e.preventDefault();if(!validateStep(totalSteps))return;
const data={timestamp:new Date().toLocaleString("ar-SA")};
["project_name","work_type","logo_style","colors","logo_type","feeling","old_logo"].forEach(f=>{
const el=document.querySelector(`input[name="${f}"]:checked`)||document.querySelector(`input[name="${f}"]`);
data[f]=el?el.value:"";
});
["work_custom","color_custom","logo_type_custom","feeling_custom"].forEach(f=>{
const i=document.querySelector(`input[name="${f}"]`);if(i)data[f]=i.value.trim();
});
data.logo_details=document.querySelector('textarea[name="logo_details"]')?.value.trim()||"";
const formData=new FormData();for(let k in data)formData.append(k,data[k]);
if(fileInput.files.length>0){const f=fileInput.files[0];formData.append("file_name",f.name);formData.append("file_type",f.type);formData.append("file_base64",await fileToBase64(f));}
document.querySelector("form").style.display="none";loadingElement.style.display="block";
try{const r=await fetch(scriptURL,{method:"POST",body:formData});const j=await r.json();loadingElement.style.display="none";if(j.result==="success"){thankyouMessage.style.display="block";}else throw new Error(j.message);}
catch(err){alert("حدث خطأ أثناء الإرسال: "+err.message);document.querySelector("form").style.display="block";loadingElement.style.display="none";}
});
updateUI();
</script>
</body>
</html>

